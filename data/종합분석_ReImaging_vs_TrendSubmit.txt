# âœ… ReImaging_Price_Trends vs trend_submit ì¢…í•© ì°¨ì´ ë¶„ì„ ë° ìˆ˜ì • ì§„í–‰ í˜„í™©
# ğŸ“… ì—…ë°ì´íŠ¸: 2025-01-13 - í†µí•© ìº˜ë¦°ë” ìƒ˜í”Œë§ êµ¬í˜„ ì™„ë£Œ

## ğŸ“… ì§„í–‰ í˜„í™© íƒ€ì„ë¼ì¸

### âœ… 2025-01-13 í†µí•© ìº˜ë¦°ë” ìƒ˜í”Œë§ êµ¬í˜„ ì™„ë£Œ
1. **ë°ì´í„° ìƒ˜í”Œë§ ë°©ì‹ ê·¼ë³¸ ê°œì„ **
   - âœ… ê¸°ì¡´: ì£¼ì‹ë³„ ê°œë³„ ìœˆë„ìš° (231ê°œ ë‚ ì§œ) â†’ í˜„ì‹¤ì„± ë¶€ì¡±
   - âœ… ì‹ ê·œ: í†µí•© ìº˜ë¦°ë” ê¸°ë°˜ 20ì¼ ìœˆë„ìš° (101ê°œ ë‚ ì§œ) â†’ í˜„ì‹¤ì  ë¦¬ë°¸ëŸ°ì‹±
   - âœ… ëª¨ë“  ì£¼ì‹ì´ ë™ì¼í•œ ê±°ë˜ì¼ ê¸°ì¤€ìœ¼ë¡œ ì°¨íŠ¸ ìƒì„±
   - âœ… Non-overlapping ìœˆë„ìš°ë¡œ ë°ì´í„° ë…ë¦½ì„± í™•ë³´

2. **ì„±ëŠ¥ ìµœì í™” ë° ì§„í–‰ë¥  í‘œì‹œ**
   - âœ… ë°˜ë³µë¬¸ êµ¬ì¡° ê°œì„ : ë‚ ì§œë³„ â†’ ì£¼ì‹ë³„ ì²˜ë¦¬ë¡œ ë³€ê²½
   - âœ… ì‚¬ì „ ê·¸ë£¹í•‘ìœ¼ë¡œ ì¤‘ë³µ í•„í„°ë§ ì œê±°
   - âœ… tqdm ì§„í–‰ë¥  í‘œì‹œ ë³µêµ¬
   - âœ… ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„: 11,752 ì£¼ì‹ Ã— 101 ìœˆë„ìš° = ì•½ 2ì‹œê°„

3. **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ê²€ì¦**
   - âœ… ì „ì²´ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ ëˆ„ì  í›„ ë…„ë„ë³„ ë¶„ë¥˜ ì €ì¥ ë°©ì‹ ìœ ì§€
   - âœ… ë…„ë„ë³„ ì§ì ‘ ì²˜ë¦¬ ëŒ€ì‹  í˜„ì¬ ë°©ì‹ìœ¼ë¡œ ì•ˆì •ì„± í™•ë³´
   - âœ… ì§„í–‰ ìƒí™©: 11,752 ì£¼ì‹ ì¤‘ 1,202ê°œ ì™„ë£Œ (10%, 1.25it/s)

### âœ… 2025-01-12 í•´ê²° ì™„ë£Œ
1. **ë°ì´í„° í†µí•© ë° ì—°ì†ì„± ë¬¸ì œ í•´ê²°**
   - âœ… 1992-2019 ì „ì²´ ê¸°ê°„ í†µí•© ë°ì´í„° ìƒì„± (`data_1992_2019_unified.parquet`)
   - âœ… equity_data.py ë°©ì‹ ì „ì²˜ë¦¬ ì ìš© (ì»¬ëŸ¼ëª… ë³€ê²½, MultiIndex, ë°ì´í„° íƒ€ì… ë³€í™˜)
   - âœ… ì—°ì†ì  EWMA ë³€ë™ì„± ê³„ì‚° (`lambda x: (x**2).ewm(alpha=0.05).mean().shift(periods=1)`)
   - âœ… ëˆ„ì  ë¡œê·¸ ìˆ˜ìµë¥  ê¸°ë°˜ ë¯¸ë˜ ìˆ˜ìµë¥  ê³„ì‚° (`np.exp(x.shift(-i) - x) - 1`)

2. **ë°ì´í„° í’ˆì§ˆ ê°œì„ **
   - âœ… CRSP ìŒìˆ˜ ê°€ê²© ì²˜ë¦¬ (ì ˆëŒ“ê°’ ë³€í™˜)
   - âœ… ë¬´íš¨ê°’ NaN ì²˜ë¦¬ (0, "C", "B", "A", "." â†’ np.nan)
   - âœ… ë°ì´í„° íƒ€ì… í‘œì¤€í™” (StockID â†’ str, Ret â†’ numeric)
   - âœ… EDA ë¶„ì„ ì¶”ê°€ (ë¶„í¬ë„, ìƒìŠ¹/í•˜ë½ ë¹„ìœ¨, ì‹œê³„ì—´ ë¶„ì„)

### âœ… 2025-01-12 ì™„ë£Œ (ì˜¤í›„ ì‘ì—…)
3. **ì´ë¯¸ì§€ ìƒì„± ì•Œê³ ë¦¬ì¦˜ ìˆ˜ì •** - ğŸ‰ ì™„ë£Œ
   - âœ… chart_library.pyì˜ DrawOHLC ë¡œì§ dataset.pyì— ì™„ì „ ì ìš©
   - âœ… PIL ê¸°ë°˜ ì´ë¯¸ì§€ ìƒì„±ìœ¼ë¡œ ë³€ê²½ (generate_chart_image_pil í•¨ìˆ˜)
   - âœ… ì›ë³¸ ì¢Œí‘œê³„ + ìµœì¢… ì´ë¯¸ì§€ ë’¤ì§‘ê¸° ì ìš© (image.transpose(Image.FLIP_TOP_BOTTOM))
   - âœ… High-Low bar êµµê²Œ ê·¸ë¦¬ê¸°, Open/Close ìˆ˜í‰ì„  êµ¬í˜„ ì™„ë£Œ

4. **ê°€ê²© ì •ê·œí™” ë°©ì‹ ìˆ˜ì •** - ğŸ‰ ì™„ë£Œ
   - âœ… adjust_price_trend_submit() í•¨ìˆ˜ ì™„ì „ ë³µì œ (generate_chart.py Lines 107-165)
   - âœ… ì²«ë‚  ì¢…ê°€=1.0 ê¸°ì¤€ ì •ê·œí™” êµ¬í˜„
   - âœ… Min-Max ìŠ¤ì¼€ì¼ë§ ì™„ì „ ì œê±°
   - âœ… ìˆ˜ìµë¥  ê¸°ë°˜ ê°€ê²© ì¬êµ¬ì„± ë¡œì§ ì ìš©

### âœ… 2025-01-12 ì™„ë£Œ (ì˜¤í›„ ì‘ì—… - íŒŒì¼ êµ¬ì¡° ì •ë¦¬)
5. **ì°¨íŠ¸ ìƒì„± íŒŒì¼ êµ¬ì¡° ê°œì„ ** - ğŸ‰ ì™„ë£Œ
   - âœ… chart_library.py ìƒì„± (DrawOHLC í´ë˜ìŠ¤ë§Œ í¬í•¨, ê¹”ë”í•œ ë¶„ë¦¬)
   - âœ… chart_generator.py ìƒì„± (ë©”ì¸ ì´ë¯¸ì§€ ìƒì„± ìŠ¤í¬ë¦½íŠ¸, adjust_price í¬í•¨)
   - âœ… ë¶ˆí•„ìš” íŒŒì¼ ì‚­ì œ (stock_data_processor.py, chart_image_generator.py)
   - âœ… ipynb íŒŒì¼ëª… ë³€ê²½ (ê¸°ëŠ¥ë³„ ëª…í™•í•œ ì´ë¦„):
     * 1_image_generation.ipynb â†’ chart_image_generation.ipynb
     * datageneration.ipynb â†’ data_processing_and_unification.ipynb

6. **ë°ì´í„° íŒŒì´í”„ë¼ì¸ í†µí•©**
   - âœ… data_1992_2019_unified.parquet íŒŒì¼ ì‚¬ìš©ìœ¼ë¡œ ë³€ê²½
   - âœ… chart_image_generation.ipynbì—ì„œ chart_generator.py í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì •
   - âœ… íŒŒì¼ êµ¬ì¡° trend_submitê³¼ ë™ì¼í•˜ê²Œ ë¶„ë¦¬ (chart_library + chart_generator)

### ğŸ“‹ ë‹¤ìŒ ì˜ˆì • ì‘ì—…

7. **ì„±ëŠ¥ ê²€ì¦**
   - â³ chart_image_generation.ipynb ì‹¤í–‰ í…ŒìŠ¤íŠ¸
   - â³ ìƒˆ êµ¬ì¡°ë¡œ ì´ë¯¸ì§€ ìƒì„± ê²€ì¦
   - â³ ìƒ˜í”Œ ì´ë¯¸ì§€ ì›ë³¸ ëŒ€ë¹„ ë¹„êµ
   - â³ ë°±í…ŒìŠ¤íŒ… ì„±ëŠ¥ í™•ì¸ (-1.93 â†’ +2.16 ëª©í‘œ)

## ğŸ” 1. ê·¼ë³¸ì  êµ¬ì¡° ì°¨ì´ (âœ… í•´ê²°ë¨)

### A. ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì°¨ì´ - âœ… í•´ê²°
**ê¸°ì¡´ ReImaging_Price_Trends:**
```
WRDS íŒŒì¼€ì´ íŒŒì¼ â†’ dataset.py â†’ ì°¨íŠ¸ ìƒì„± â†’ PyTorch ë¡œë”
```

**âœ… ìˆ˜ì •ëœ ReImaging_Price_Trends (2025-01-12):**
```
WRDS ì›ì‹œ ë°ì´í„° â†’ equity_data.py ë°©ì‹ ì „ì²˜ë¦¬ â†’ í†µí•© ë°ì´í„° â†’ dataset.py â†’ ì°¨íŠ¸ ìƒì„±
```

**trend_submit (ë…¼ë¬¸ ì €ì):**
```
CRSP ì›ì‹œ ë°ì´í„° â†’ equity_data.py â†’ generate_chart.py â†’ chart_dataset.py â†’ PyTorch ë¡œë”
```

**âœ… í•´ê²° ì™„ë£Œ:** 
- equity_data.pyì™€ ë™ì¼í•œ ì „ì²˜ë¦¬ ë¡œì§ ì ìš©
- ì›ì‹œ ë°ì´í„°ë¶€í„° ì „ì²´ ì²˜ë¦¬ ê³¼ì • êµ¬í˜„
- ë°ì´í„° í’ˆì§ˆê³¼ ì „ì²˜ë¦¬ ë°©ì‹ ì¼ì¹˜

### B. ë°ì´í„° ì—°ì†ì„± ë¬¸ì œ - âœ… í•´ê²°  
**âœ… ìˆ˜ì •ëœ ReImaging_Price_Trends (2025-01-12):**
- `data_1992_2019_unified.parquet` (í†µí•© ì—°ì† ë°ì´í„°)
- 1992ë…„ë¶€í„° ì „ì²´ ê¸°ê°„ í¬í•¨ (ì´ë™í‰ê·  ê³„ì‚°ìš© lookback ë°ì´í„°)
- EWMA ë³€ë™ì„±ì´ ì—°ì† ê³„ì‚°ë¨

**trend_submit:**
- ì „ì²´ ê¸°ê°„ ì—°ì† ë°ì´í„° (1992~2019)
- EWMA ë³€ë™ì„±ì´ ì—°ì† ê³„ì‚°ë¨
- ì´ë™í‰ê·  ê³„ì‚°ì— í•„ìš”í•œ ì´ì „ ë°ì´í„° í•­ìƒ ì¡´ì¬

## ğŸš¨ 2. ì¹˜ëª…ì  ì°¨ì´ì ë“¤ (ì„±ëŠ¥ì— ì§ì ‘ ì˜í–¥) - â³ ìˆ˜ì • ì¤‘

### A. ê°€ê²© ì •ê·œí™” ë°©ì‹ - âŒ ì•„ì§ ë¯¸í•´ê²° (ìµœìš°ì„  ìˆ˜ì • í•„ìš”)
**í˜„ì¬ ReImaging (ì—¬ì „íˆ í‹€ë¦¼):**
```python
# ì „ì—­ Min-Max ì •ê·œí™” â†’ ëª¨ë“  ê°’ì´ 0~1 ë²”ìœ„
price_slice = (normalized_prices - price_min) / (price_max - price_min)
# ë¬¸ì œ: ì°¨íŠ¸ë§ˆë‹¤ ìŠ¤ì¼€ì¼ì´ ë‹¤ë¦„, ìƒëŒ€ì  ì›€ì§ì„ ì™œê³¡
```

**trend_submit (ì •ë‹µ):**
```python
# adjust_price(): ì²«ë‚  ì¢…ê°€=1.0, ìˆ˜ìµë¥ ë¡œ ì¬êµ¬ì„±
res_df.at[0, "Close"] = 1.0
res_df.at[i, "Close"] = (1 + today_ret) * pre_close
# ë§ˆì§€ë§‰ì— ì°¨íŠ¸ ì‹œì‘ì ìœ¼ë¡œ ì •ê·œí™”
data *= (1.0 / data["Close"].loc[start_date_index])
# ì¥ì : ëª¨ë“  ì°¨íŠ¸ê°€ ë™ì¼í•œ ì‹œì‘ì , ìƒëŒ€ì  ì›€ì§ì„ ë³´ì¡´
```

**ğŸ”¥ ì´ ì°¨ì´ê°€ ì„±ëŠ¥ ì°¨ì´ì˜ ì£¼ìš” ì›ì¸ - ì¦‰ì‹œ ìˆ˜ì • í•„ìš”**

### B. ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ë°©ì‹ - âœ… ë¶€ë¶„ í•´ê²° (datageneration.ipynbì—ì„œ)
**âœ… ìˆ˜ì •ëœ ReImaging (2025-01-12):**
```python
# equity_data.py ë°©ì‹ìœ¼ë¡œ ì—„ê²©í•˜ê²Œ ì²˜ë¦¬
df = df.replace({
    "Close": {0: np.nan},   
    "Open": {0: np.nan},
    "High": {0: np.nan},
    "Low": {0: np.nan},
    "Ret": {"C": np.nan, "B": np.nan, "A": np.nan, ".": np.nan},
})
df = df.dropna(subset=["Ret"])  # ë¬´íš¨í•œ ìˆ˜ìµë¥  ì œê±°
```

**trend_submit (ì—„ê²©í•¨):**
```python
if data["Close"].iloc[0] == 0.0 or pd.isna(data["Close"].iloc[0]):
    return 2  # ì „ì²´ ìœˆë„ìš° íê¸°
```

**âœ… í•´ê²°ë¨: ë°ì´í„° í’ˆì§ˆ í¬ê²Œ ê°œì„ ë¨**

### C. Yì¶• ì¢Œí‘œ ë³€í™˜ - âŒ ì•„ì§ ë¯¸í•´ê²° (ì´ë¯¸ì§€ ìƒì„± ë‹¨ê³„)
**í˜„ì¬ ReImaging (ì—¬ì „íˆ ì˜ëª»ë¨):**
```python
# ì§ì ‘ Yì¶• ë’¤ì§‘ê¸°
image[price_region_end - open_px, i*3] = 255
```

**trend_submit (ì •ë‹µ):**
```python
# ì •ìƒ ì¢Œí‘œ ê³„ì‚° í›„ ì´ë¯¸ì§€ ì „ì²´ ë’¤ì§‘ê¸°
pixels_per_unit = (self.ohlc_height - 1.0) / (self.maxp - self.minp)
res = np.around((ret - self.minp) * pixels_per_unit)
# ë§ˆì§€ë§‰ì— ì´ë¯¸ì§€ ë’¤ì§‘ê¸°
image = image.transpose(Image.FLIP_TOP_BOTTOM)
```

**â³ ë‹¤ìŒ ìˆ˜ì • ì˜ˆì • - dataset.py ì´ë¯¸ì§€ ìƒì„± ë¶€ë¶„**

## ğŸ”§ 3. ë³µì œí•´ì•¼ í•  í•µì‹¬ ì½”ë“œë“¤ - ì§„í–‰ í˜„í™©

### A. equity_data.pyì˜ EWMA ê³„ì‚° ë¡œì§ - âœ… ì™„ë£Œ (2025-01-12)
```python
# âœ… datageneration.ipynbì—ì„œ ì™„ì „íˆ êµ¬í˜„ë¨
df["EWMA_vol"] = df.groupby("StockID")["Ret"].transform(
    lambda x: (x**2).ewm(alpha=0.05).mean().shift(periods=1)
)
# âœ… ëˆ„ì  ë¡œê·¸ ìˆ˜ìµë¥ ë„ í•¨ê»˜ êµ¬í˜„
df["log_ret"] = np.log(1 + df.Ret)
df["cum_log_ret"] = df.groupby("StockID")["log_ret"].cumsum(skipna=True)
```

### B. generate_chart.pyì˜ adjust_price() í•¨ìˆ˜ - âœ… ì™„ë£Œ (2025-01-12)
```python
# âœ… dataset.pyì— adjust_price_trend_submit() í•¨ìˆ˜ë¡œ ì™„ì „ êµ¬í˜„ë¨
def adjust_price_trend_submit(df):
    """trend_submitì˜ adjust_price() ë©”ì„œë“œë¥¼ ì •í™•íˆ ë³µì œ"""
    if len(df) == 0:
        raise ValueError("adjust_price: Empty DataFrame")
    
    df = df.reset_index(drop=True)
    
    # ì²«ë‚  ì¢…ê°€ë¥¼ ì •ê·œí™” ê¸°ì¤€ìœ¼ë¡œ ì‚¬ìš©
    fd_close = abs(df.at[0, "close"])
    if df.at[0, "close"] == 0.0 or pd.isna(df.at[0, "close"]):
        raise ValueError("adjust_price: First day close is nan or zero")
    
    res_df = df.copy()
    
    # ì²«ë‚  ê°€ê²©ë“¤ì„ 1.0 ê¸°ì¤€ìœ¼ë¡œ ì •ê·œí™”
    res_df.at[0, "close"] = 1.0
    res_df.at[0, "open"] = abs(res_df.at[0, "open"]) / fd_close
    res_df.at[0, "high"] = abs(res_df.at[0, "high"]) / fd_close
    res_df.at[0, "low"] = abs(res_df.at[0, "low"]) / fd_close
    
    # ìˆ˜ìµë¥ ì„ ì‚¬ìš©í•˜ì—¬ ê°€ê²© ì¬êµ¬ì„± (intraday íŒ¨í„´ ë³´ì¡´)
    pre_close = 1
    for i in range(1, len(res_df)):
        today_ret = np.float64(res_df.at[i, "ret"])
        today_closep = abs(res_df.at[i, "close"])
        
        # ìƒˆë¡œìš´ ì¢…ê°€ ê³„ì‚°: (1 + ìˆ˜ìµë¥ ) Ã— ì´ì „ ì¢…ê°€
        res_df.at[i, "close"] = (1 + today_ret) * pre_close
        
        # ë‹¤ë¥¸ ê°€ê²©ë“¤ì€ ë¹„ë¡€ì ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ intraday íŒ¨í„´ ë³´ì¡´
        if today_closep != 0:
            res_df.at[i, "open"] = res_df.at[i, "close"] / today_closep * abs(res_df.at[i, "open"])
            res_df.at[i, "high"] = res_df.at[i, "close"] / today_closep * abs(res_df.at[i, "high"])
            res_df.at[i, "low"] = res_df.at[i, "close"] / today_closep * abs(res_df.at[i, "low"])
        
        pre_close = res_df.at[i, "close"]
    
    return res_df

# âœ… í•µì‹¬ ì°¨ì´ì  í•´ê²°:
# - Min-Max ì •ê·œí™” ì™„ì „ ì œê±°
# - ì²«ë‚  ì¢…ê°€=1.0 ê¸°ì¤€ì  ì„¤ì •
# - ìˆ˜ìµë¥  ê¸°ë°˜ ìˆœì°¨ ì¬êµ¬ì„±ìœ¼ë¡œ ì¼ê´€ëœ ìŠ¤ì¼€ì¼ë§
```

### C. chart_library.pyì˜ DrawOHLC í´ë˜ìŠ¤ - âœ… ì™„ë£Œ (2025-01-12)
```python
# âœ… dataset.pyì— generate_chart_image_pil() í•¨ìˆ˜ë¡œ ì™„ì „ êµ¬í˜„ë¨
def generate_chart_image_pil(price_slice, volume_slice, image_size, lookback):
    """PIL ê¸°ë°˜ ì°¨íŠ¸ ì´ë¯¸ì§€ ìƒì„± (chart_library.py DrawOHLC ë°©ì‹)"""
    
    # âœ… ê°€ê²© ë²”ìœ„ ê³„ì‚° ë° ìœ íš¨ì„± ê²€ì¦
    all_prices = np.concatenate([...])
    minp, maxp = np.min(all_prices), np.max(all_prices)
    
    # âœ… ì¢Œí‘œ ë³€í™˜ í•¨ìˆ˜ (chart_library.pyì˜ __ret_to_yaxisì™€ ë™ì¼)
    def ret_to_yaxis(ret):
        pixels_per_unit = (ohlc_height - 1.0) / (maxp - minp)
        res = np.around((ret - minp) * pixels_per_unit)
        return int(res)
    
    # âœ… PIL ì´ë¯¸ì§€ ìƒì„± (í‘ë°±, ê²€ì€ ë°°ê²½)
    ohlc = Image.new("L", (ohlc_width, ohlc_height), 0)
    pixels = ohlc.load()
    
    # âœ… ì´ë™í‰ê· ì„  ë¨¼ì € ê·¸ë¦¬ê¸° (ë°°ê²½)
    if 'ma' in price_slice.columns:
        draw = ImageDraw.Draw(ohlc)
        for day in range(lookback - 1):
            # ì—°ì†ëœ MA í¬ì¸íŠ¸ë¥¼ ì„ ìœ¼ë¡œ ì—°ê²°
            draw.line((centers[day], ret_to_yaxis(ma_today), 
                      centers[day + 1], ret_to_yaxis(ma_next)), 
                     width=1, fill=255)
    
    # âœ… OHLC ë°” ê·¸ë¦¬ê¸° (ê° ë‚ ì§œë³„)
    for day in range(lookback):
        # High-Low ìˆ˜ì§ ë°” (êµµê²Œ)
        for x in range(left, right + 1):
            for y in range(line_bottom, line_top + 1):
                pixels[x, y] = 255  # í°ìƒ‰
        
        # Open ê°€ê²© (ì™¼ìª½ ìˆ˜í‰ì„ )
        for x in range(left, center_x + 1):
            pixels[x, open_y] = 255
        
        # Close ê°€ê²© (ì˜¤ë¥¸ìª½ ìˆ˜í‰ì„ )
        for x in range(center_x, right + 1):
            pixels[x, close_y] = 255
    
    # âœ… ê±°ë˜ëŸ‰ ë°” ì¶”ê°€ (í•˜ë‹¨ ì˜ì—­)
    if volume_height > 0:
        volume_bar = Image.new("L", (ohlc_width, volume_height), 0)
        # ê±°ë˜ëŸ‰ì„ ì•„ë˜ì—ì„œ ìœ„ë¡œ ê·¸ë¦¬ê¸°
        combined = Image.new("L", (ohlc_width, total_height), 0)
        combined.paste(ohlc, (0, volume_height))  # OHLC ìƒë‹¨
        combined.paste(volume_bar, (0, 0))  # ê±°ë˜ëŸ‰ í•˜ë‹¨
        final_image = combined
    else:
        final_image = ohlc
    
    # âœ… í•µì‹¬! Yì¶• ë’¤ì§‘ê¸° (chart_library.py Line 208ê³¼ ë™ì¼)
    final_image = final_image.transpose(Image.FLIP_TOP_BOTTOM)
    
    return final_image

# âœ… ì£¼ìš” êµ¬í˜„ ì™„ë£Œ:
# - PIL ê¸°ë°˜ ì´ë¯¸ì§€ ìƒì„± (NumPy ì§ì ‘ ì¡°ì‘ ëŒ€ì‹ )
# - ì •í™•í•œ ì¢Œí‘œ ë³€í™˜ (chart_library.pyì™€ ë™ì¼í•œ ê³µì‹)
# - High-Low ë°” êµµê²Œ ê·¸ë¦¬ê¸°
# - Open/Close ìˆ˜í‰ì„  êµ¬í˜„
# - ì´ë™í‰ê· ì„  ì—°ì† ì„ ìœ¼ë¡œ ê·¸ë¦¬ê¸°
# - ìµœì¢… Yì¶• ë’¤ì§‘ê¸° ì ìš©
```

### D. chart_dataset.pyì˜ í•„í„°ë§ ë¡œì§ë“¤ - â³ ë‚˜ì¤‘ì— êµ¬í˜„ (í¬íŠ¸í´ë¦¬ì˜¤ ë‹¨ê³„ì—ì„œ)
```python
# â³ ì´ í•„í„°ë§ë“¤ì€ ë°±í…ŒìŠ¤íŒ…/í¬íŠ¸í´ë¦¬ì˜¤ ë‹¨ê³„ì—ì„œ êµ¬í˜„ ì˜ˆì •
# t-í†µê³„ëŸ‰ í•„í„°ë§
if tstat_threshold != 0:
    tstats = np.divide(
        self.label_dict[self.ret_val_name], np.sqrt(self.label_dict["EWMA_vol"])
    )
    tstats = np.abs(tstats)
    t_th = np.nanpercentile(tstats[idx], tstat_threshold)
    tstat_idx = tstats > t_th
    idx = idx & tstat_idx

# ì—°ë§ ë°ì´í„° ì œê±° (look-ahead bias ë°©ì§€)  
if remove_tail:
    last_day = "12/24" if self.pw == 5 else "12/1" if self.pw == 20 else "10/1"
    last_day = pd.Timestamp("{}/{}".format(last_day, self.year))
    idx = idx & (pd.to_datetime([str(t) for t in self.label_dict["Date"]]) < last_day)
```

## ğŸ› ï¸ 4. êµ¬ì²´ì  ìˆ˜ì • ìˆœì„œ - ì—…ë°ì´íŠ¸ëœ ì§„í–‰ í˜„í™©

### Phase 1: ë°ì´í„° í†µí•© - âœ… ì™„ë£Œ (2025-01-12)
```python  
# âœ… datageneration.ipynbì—ì„œ ì™„ë£Œë¨
# 1. WRDSì—ì„œ 1992-2019 í†µí•© ë°ì´í„° ë‹¤ìš´ë¡œë“œ âœ…
# 2. equity_data.py ë°©ì‹ ì „ì²˜ë¦¬ ì™„ë£Œ âœ…
# 3. EWMA ë³€ë™ì„± ì—°ì† ê³„ì‚° ì™„ë£Œ âœ…
# 4. ëˆ„ì  ë¡œê·¸ ìˆ˜ìµë¥  ê¸°ë°˜ ë¯¸ë˜ ìˆ˜ìµë¥  ê³„ì‚° ì™„ë£Œ âœ…
# 5. data_1992_2019_unified.parquet ì €ì¥ ì™„ë£Œ âœ…
```

**âœ… í•´ê²°ëœ ì£¼ìš” ì‚¬í•­:**
- ë°ì´í„° ì—°ì†ì„± ë¬¸ì œ í•´ê²° (1992ë…„ë¶€í„°)
- equity_data.py ë™ì¼í•œ ì „ì²˜ë¦¬ ë¡œì§ ì ìš©
- CRSP ë°ì´í„° í’ˆì§ˆ ê°œì„  (ë¬´íš¨ê°’ ì œê±°)
- EDA ë¶„ì„ìœ¼ë¡œ ë°ì´í„° ê²€ì¦
    return full_df
```

### Phase 2: ì°¨íŠ¸ ìƒì„± ë¡œì§ êµì²´ (2ì¼)
```python
# dataset.py ëŒ€ì²´
from trend_submit_integration import TrendSubmitChartGenerator

class TrendSubmitCompatibleDataset:
    def __init__(self, win_size, mode, label):
        self.full_df = pd.read_parquet('data_1993_2019_unified_trend_submit.parquet')
        self.chart_generator = TrendSubmitChartGenerator()
        
        # ëª¨ë“œë³„ íƒ€ê²Ÿ ë…„ë„ ì„¤ì • (ì°¨íŠ¸ ìƒì„±ì€ ì „ì²´ ë°ì´í„° ì‚¬ìš©)
        if mode == 'train':
            self.target_years = range(1993, 2001)
        else:
            self.target_years = range(2001, 2020)
    
    def generate_images(self, sample_rate):
        results = []
        for year in self.target_years:
            year_results = self.chart_generator.generate_year_charts(
                self.full_df, year, win_size, sample_rate
            )
            results.extend(year_results)
        return results

# trend_submit_integration.py (ìƒˆ íŒŒì¼)
class TrendSubmitChartGenerator:
    def __init__(self):
        # trend_submitì˜ GenerateStockDataì™€ DrawOHLC í†µí•©
        pass
    
    def generate_year_charts(self, full_df, year, window_size, sample_rate):
        # trend_submitì˜ generate_chart.py ë¡œì§ ì ìš©
        # adjust_price() ì‚¬ìš©
        # DrawOHLC í´ë˜ìŠ¤ë¡œ ì°¨íŠ¸ ìƒì„±
        pass
```

### Phase 3: í•„í„°ë§ ë¡œì§ ì¶”ê°€ (1ì¼)
```python
# dataset.pyì— trend_submit í•„í„°ë§ ì¶”ê°€
def apply_trend_submit_filters(self, data, tstat_threshold=20, remove_tail=True):
    # 1. t-í†µê³„ëŸ‰ í•„í„°ë§
    if tstat_threshold > 0:
        tstats = np.abs(data['ret'] / np.sqrt(data['EWMA_vol']))
        t_th = np.nanpercentile(tstats, tstat_threshold)
        data = data[tstats > t_th]
    
    # 2. ì—°ë§ ë°ì´í„° ì œê±°
    if remove_tail:
        data['month'] = pd.to_datetime(data['Date']).dt.month
        data = data[data['month'] <= 11]  # 12ì›” ì œê±°
    
    # 3. ê²°ì¸¡ì¹˜ ì—„ê²© ì²˜ë¦¬
    data = data.dropna(subset=['Open', 'High', 'Low', 'Close', 'EWMA_vol'])
    
    return data
```

### Phase 4: PyTorch í†µí•© ìˆ˜ì • (0.5ì¼)
```python
def __getitem__(self, idx):
    # trend_submit í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
    sample = {
        "image": self.images[idx],
        "label": self.labels[idx],
        "ret_val": self.ret_vals[idx],
        "ending_date": self.dates[idx],
        "StockID": self.stock_ids[idx],
        "MarketCap": self.market_caps[idx],
    }
    return sample
```

## ğŸ¯ 5. ì˜ˆìƒ ê²°ê³¼

### ìˆ˜ì • ì „ (í˜„ì¬):
- Sharpe Ratio: -1.93 (ë…¼ë¬¸ê³¼ ë°˜ëŒ€ ë°©í–¥)
- ì´ë¯¸ì§€ê°€ ë…¼ë¬¸ ì €ìì™€ ì™„ì „íˆ ë‹¤ë¦„
- ë°ì´í„° í’ˆì§ˆ ë¬¸ì œ

### ìˆ˜ì • í›„ (ì˜ˆìƒ):
- Sharpe Ratio: +1.5 ~ +2.5 (ë…¼ë¬¸ ìˆ˜ì¤€)  
- ì´ë¯¸ì§€ê°€ ë…¼ë¬¸ ì €ìì™€ ë™ì¼
- ë°ì´í„° í’ˆì§ˆ ë° í•„í„°ë§ ê°œì„ 

## âœ… 6. ì²´í¬í¬ì¸íŠ¸

### Phase 1 ì™„ë£Œ í™•ì¸:
- [ ] í†µí•© íŒŒì¼€ì´ íŒŒì¼ ìƒì„±ë¨
- [ ] EWMA_volì´ trend_submitê³¼ ë™ì¼í•˜ê²Œ ê³„ì‚°ë¨
- [ ] 2001ë…„ ì°¨íŠ¸ ìƒì„± ì‹œ 2000ë…„ ë°ì´í„° ì‚¬ìš© ê°€ëŠ¥

### Phase 2 ì™„ë£Œ í™•ì¸:
- [ ] ë™ì¼ ì£¼ì‹/ë‚ ì§œì—ì„œ trend_submitê³¼ ë™ì¼í•œ ì´ë¯¸ì§€ ìƒì„±
- [ ] adjust_price() í•¨ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì‘ë™
- [ ] Yì¶• ë’¤ì§‘ê¸°ê°€ ì •í™•íˆ ì ìš©ë¨

### Phase 3 ì™„ë£Œ í™•ì¸:
- [ ] t-í†µê³„ëŸ‰ í•„í„°ë¡œ ìƒ˜í”Œ ìˆ˜ ê°ì†Œ
- [ ] ì—°ë§ ë°ì´í„° ì œê±°ë¡œ look-ahead bias ë°©ì§€
- [ ] ê²°ì¸¡ì¹˜ ì—„ê²© ì²˜ë¦¬ë¡œ ë°ì´í„° í’ˆì§ˆ í–¥ìƒ

### Phase 4 ì™„ë£Œ í™•ì¸:
- [ ] PyTorch ë¡œë”ê°€ trend_submit í˜•ì‹ ë°˜í™˜
- [ ] í›ˆë ¨ íŒŒì´í”„ë¼ì¸ì´ ì •ìƒ ì‘ë™
- [ ] ë°±í…ŒìŠ¤íŒ… ê²°ê³¼ê°€ ë…¼ë¬¸ ìˆ˜ì¤€ ë‹¬ì„±

## ğŸ”§ 7. ë°ì´í„° êµ¬ì¡° ë° ë¼ë²¨ë§ í˜¸í™˜ì„± ë¶„ì„

### A. datageneration.ipynb vs equity_data.py í˜¸í™˜ì„± - âœ… ì™„ë£Œ
**âœ… ë°ì´í„° êµ¬ì¡° ì¼ì¹˜:**
```python
# datageneration.ipynbì—ì„œ ìƒì„±ëœ ì»¬ëŸ¼ë“¤:
- 'code', 'date', 'close', 'volume', 'ret', 'open', 'high', 'low'
- 'mktcap', 'ewma_vol', 'ret5', 'ret20', 'ret60' 
- 'label_5', 'label_20', 'label_60'

# trend_submit equity_data.py ì˜ˆìƒ ì»¬ëŸ¼ë“¤:
- 'StockID', 'Date', 'Close', 'Vol', 'Ret', 'Open', 'High', 'Low'
- 'MarketCap', 'EWMA_vol', 'Ret_5d', 'Ret_20d', 'Ret_60d'
```

**âœ… ì™„ì „ í˜¸í™˜ ë‹¬ì„±:**
- datageneration.ipynbì—ì„œ equity_data.py ë°©ì‹ìœ¼ë¡œ ì „ì²˜ë¦¬ ì ìš©
- ë™ì¼í•œ EWMA ë³€ë™ì„± ê³„ì‚°: `(x**2).ewm(alpha=0.05).mean().shift(periods=1)`
- ë™ì¼í•œ ëˆ„ì  ë¡œê·¸ ìˆ˜ìµë¥  ê¸°ë°˜ ë¯¸ë˜ ìˆ˜ìµë¥ : `np.exp(x.shift(-i) - x) - 1`

### B. dataset.py vs chart_dataset.py í˜¸í™˜ì„± ë¶„ì„

**ğŸ” chart_dataset.pyì˜ í•µì‹¬ êµ¬ì¡°:**
```python
# chart_dataset.py EquityDataset.__getitem__():
sample = {
    "image": image,                                    # ì •ê·œí™”ëœ ì°¨íŠ¸ ì´ë¯¸ì§€
    "label": self.label[idx],                         # íƒ€ê²Ÿ ë¼ë²¨ (0/1)
    "ret_val": self.label_dict[self.ret_val_name][idx], # ì‹¤ì œ ìˆ˜ìµë¥ 
    "ending_date": self.label_dict["Date"][idx],       # ë‚ ì§œ
    "StockID": self.label_dict["StockID"][idx],        # ì¢…ëª© ì½”ë“œ
    "MarketCap": self.label_dict["MarketCap"][idx],    # ì‹œê°€ì´ì•¡
}
```

**âœ… dataset.pyì—ì„œ í˜¸í™˜ì„± í™•ë³´:**
```python
# dataset.py single_symbol_image() ë°˜í™˜ êµ¬ì¡°:
entry = [image, label_ret5, label_ret20, label_ret60, 
         actual_ret5, actual_ret20, actual_ret60, 
         entry_date, entry_code, market_cap, ewma_vol]

# âœ… í•„ìš” ì •ë³´ ëª¨ë‘ í¬í•¨:
# - image: ì°¨íŠ¸ ì´ë¯¸ì§€ (PIL/NumPy ìƒì„±)
# - label_ret5/20/60: ë°”ì´ë„ˆë¦¬ ë¼ë²¨ (0/1)
# - actual_ret5/20/60: ì‹¤ì œ ìˆ˜ìµë¥  (ë°±ë¶„ìœ¨)
# - entry_date, entry_code: ë©”íƒ€ë°ì´í„°
# - market_cap, ewma_vol: ì¶”ê°€ í”¼ì²˜
```

### C. ì´ë¯¸ì§€ ë°ì´í„° í˜•ì‹ í˜¸í™˜ì„±

**ğŸ” trend_submit ì´ë¯¸ì§€ ì €ì¥ ë°©ì‹:**
```python
# chart_dataset.pyì—ì„œ ë¡œë”©:
images = np.memmap(images_path, dtype=np.uint8, mode="r")
images = images.reshape((-1, height, width))

# ì´ë¯¸ì§€ ì •ê·œí™”:
image = (self.images[idx] / 255.0 - self.demean[0]) / self.demean[1]
```

**âœ… dataset.py í˜¸í™˜ì„±:**
```python
# âœ… ë™ì¼í•œ uint8 í˜•ì‹ìœ¼ë¡œ ì´ë¯¸ì§€ ìƒì„±
# âœ… 0-255 í”½ì…€ ê°’ ë²”ìœ„ ì‚¬ìš© (0=ê²€ì€ ë°°ê²½, 255=í° ì„ )
# âœ… PIL ì´ë¯¸ì§€ë¥¼ numpy ë°°ì—´ë¡œ ë³€í™˜: np.array(image_pil)
# âœ… ìµœì¢… shape: (height, width) - ë‹¨ì¼ ì±„ë„ grayscale
```

### D. ë¼ë²¨ëª… ë³€ê²½ ì‚¬í•­ ë° í˜¸í™˜ì„±

**âš ï¸ ì ì¬ì  í˜¸í™˜ì„± ì´ìŠˆ ë°œê²¬:**
```python
# datageneration.ipynbì—ì„œ ìƒì„±ëœ ë¼ë²¨ëª…:
'label_5', 'label_20', 'label_60'  # ë°”ì´ë„ˆë¦¬ (0/1)
'ret5', 'ret20', 'ret60'           # ë°±ë¶„ìœ¨ ìˆ˜ìµë¥ 

# dataset.pyì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¼ë²¨ëª…:
tabular_df.iloc[d]['label_5']      # âœ… ì¼ì¹˜
tabular_df.iloc[d]['ret5']         # âœ… ì¼ì¹˜

# chart_dataset.pyì—ì„œ ê¸°ëŒ€í•˜ëŠ” ë¼ë²¨ëª…:
self.label_dict["Ret_5d"]          # âŒ ë¶ˆì¼ì¹˜!
self.label_dict[f"Ret_{self.pw}d"] # âŒ í˜•ì‹ ë‹¤ë¦„
```

**âœ… í•´ê²° ë°©ì•ˆ:**
- datageneration.ipynbì—ì„œ ì´ë¯¸ í˜¸í™˜ ë¼ë²¨ ìƒì„±: `ret5`, `ret20`, `ret60`
- dataset.pyì—ì„œ ì •í™•í•œ ì»¬ëŸ¼ëª… ì‚¬ìš© ì¤‘
- í•„ìš”ì‹œ ì¶”ê°€ ì»¬ëŸ¼ëª… ë§¤í•‘ ê°€ëŠ¥

## âœ… 8. ì°¨íŠ¸ ìƒì„± íŒŒì¼ êµ¬ì¡° ì™„ì „ ê°œì„  (2025-01-12 ì™„ë£Œ)

### A. íŒŒì¼ êµ¬ì¡° ì •ë¦¬ ì™„ë£Œ
**âœ… ìµœì¢… êµ¬ì¡° (trend_submitê³¼ ë™ì¼):**
```
data/
â”œâ”€â”€ chart_library.py              # DrawOHLC í´ë˜ìŠ¤ë§Œ (ê¹”ë”í•œ ë¶„ë¦¬)
â”œâ”€â”€ chart_generator.py            # ë©”ì¸ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ + adjust_price
â”œâ”€â”€ chart_image_generation.ipynb  # ì´ë¯¸ì§€ ìƒì„± ì‹¤í–‰ ë…¸íŠ¸ë¶ (ì´ë¦„ ë³€ê²½)
â”œâ”€â”€ data_processing_and_unification.ipynb  # ë°ì´í„° ì „ì²˜ë¦¬ ë…¸íŠ¸ë¶ (ì´ë¦„ ë³€ê²½)
â””â”€â”€ data_1992_2019_unified.parquet         # í†µí•© ë°ì´í„°
```

### B. ì™„ë£Œëœ ìˆ˜ì • ì‚¬í•­
1. **âœ… ë¶ˆí•„ìš”í•œ íŒŒì¼ ì‚­ì œ:**
   - stock_data_processor.py (ì‚­ì œ ì™„ë£Œ)
   - chart_image_generator.py (ì‚­ì œ ì™„ë£Œ)

2. **âœ… íŒŒì¼ëª… ê¸°ëŠ¥ë³„ ë³€ê²½:**
   - 1_image_generation.ipynb â†’ chart_image_generation.ipynb
   - datageneration.ipynb â†’ data_processing_and_unification.ipynb

3. **âœ… ë…¸íŠ¸ë¶ ìŠ¤í¬ë¦½íŠ¸ í˜¸ì¶œ ìˆ˜ì •:**
   ```python
   # ê¸°ì¡´ (í‹€ë¦¼):
   !python ../datageneration.py --image_days 5 --mode train
   
   # ìˆ˜ì • ì™„ë£Œ:
   !python chart_generator.py --image_days 5 --mode train
   ```

4. **âœ… íŒŒì¼ ë¶„ë¦¬ êµ¬ì¡° ì™„ì„±:**
   - chart_library.py: DrawOHLC í´ë˜ìŠ¤ë§Œ (trend_submitê³¼ ë™ì¼)
   - chart_generator.py: ë©”ì¸ ë¡œì§ + adjust_price (trend_submitê³¼ ë™ì¼)

### C. í˜„ì¬ ìƒíƒœ
**ğŸ‰ íŒŒì¼ êµ¬ì¡° ê°œì„  100% ì™„ë£Œ**
- âœ… ëª¨ë“  ë¶ˆí•„ìš” íŒŒì¼ ì •ë¦¬
- âœ… ê¸°ëŠ¥ë³„ ëª…í™•í•œ íŒŒì¼ëª… ì ìš©  
- âœ… trend_submitê³¼ ë™ì¼í•œ ë¶„ë¦¬ êµ¬ì¡°
- âœ… ë…¸íŠ¸ë¶ì—ì„œ ì˜¬ë°”ë¥¸ ìŠ¤í¬ë¦½íŠ¸ í˜¸ì¶œ

### D. ë‹¤ìŒ ë‹¨ê³„
**â³ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ë§Œ ë‚¨ìŒ:**
1. chart_image_generation.ipynb ì‹¤í–‰
2. ìƒˆë¡œìš´ íŒŒì¼ êµ¬ì¡°ë¡œ ì´ë¯¸ì§€ ìƒì„± ê²€ì¦
3. ìƒì„±ëœ ì´ë¯¸ì§€ í’ˆì§ˆ í™•ì¸

**í•µì‹¬: íŒŒì¼ êµ¬ì¡° ê°œì„  ì™„ì „íˆ ì™„ë£Œ, ì´ì œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ ë‹¨ê³„**

## ğŸš€ 9. í†µí•© ìº˜ë¦°ë” ìƒ˜í”Œë§ êµ¬í˜„ ìƒì„¸ (2025-01-13)

### A. ê¸°ì¡´ ë¬¸ì œì  ë° í•´ê²°ì±…
**ğŸš¨ ê¸°ì¡´ ë¬¸ì œ (ê°œë³„ ì£¼ì‹ ìœˆë„ìš°):**
```python
# ê° ì£¼ì‹ë§ˆë‹¤ ë…ë¦½ì ì¸ ìœˆë„ìš° ìƒì„±
for stock_code, stock_df in df.groupby('code'):
    for d in range(lookback-1, len(stock_df), lookback):
        # ë¬¸ì œ: ì£¼ì‹ë§ˆë‹¤ ë‹¤ë¥¸ ë‚ ì§œ ìœˆë„ìš° ì‚¬ìš© â†’ 231ê°œ ì„œë¡œ ë‹¤ë¥¸ ë‚ ì§œ
```

**âœ… í•´ê²°ì±… (í†µí•© ìº˜ë¦°ë” ìœˆë„ìš°):**
```python
# ì „ì²´ ê±°ë˜ì¼ ê¸°ì¤€ í†µí•© ìœˆë„ìš°
all_dates = sorted(df['date'].unique())  # 2020ê°œ ê±°ë˜ì¼
window_indices = range(lookback-1, len(all_dates), lookback)  # 101ê°œ ìœˆë„ìš°

for stock_code, stock_df in tqdm(stock_groups):
    for start_idx in window_indices:
        window_dates = all_dates[start_idx-(lookback-1):start_idx+1]
        # ëª¨ë“  ì£¼ì‹ì´ ë™ì¼í•œ 20ì¼ ìœˆë„ìš° ì‚¬ìš©
```

### B. í˜„ì‹¤ì„± ë° ì‹¤ìš©ì„± ê°œì„ 
**ğŸ¯ í˜„ì‹¤ì  ë¦¬ë°¸ëŸ°ì‹± êµ¬í˜„:**
- âœ… ëª¨ë“  ì£¼ì‹ì´ ë™ì¼í•œ 20ì¼ ê°„ê²©ìœ¼ë¡œ í‰ê°€ë¨
- âœ… í¬íŠ¸í´ë¦¬ì˜¤ ë§¤ë‹ˆì €ê°€ ì‹¤ì œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¼ê´€ëœ ë¦¬ë°¸ëŸ°ì‹± ìŠ¤ì¼€ì¤„
- âœ… 101ê°œ ë¦¬ë°¸ëŸ°ì‹± ë‚ ì§œ = ì—°í‰ê·  12.6íšŒ ë¦¬ë°¸ëŸ°ì‹± (í˜„ì‹¤ì )

**ğŸ“Š ë°ì´í„° ë…ë¦½ì„±:**
- âœ… Non-overlapping ìœˆë„ìš°ë¡œ ë°ì´í„° ëˆ„ì¶œ ë°©ì§€
- âœ… Train/Test ë¶„í• ì—ì„œ ì‹œê°„ì  ë…ë¦½ì„± í™•ë³´
- âœ… ë°±í…ŒìŠ¤íŒ…ì—ì„œ Look-ahead bias ë°©ì§€

### C. ì„±ëŠ¥ ìµœì í™” ê²°ê³¼
**âš¡ ì²˜ë¦¬ ì†ë„ ê°œì„ :**
```python
# ğŸš¨ ê¸°ì¡´ (ëŠë¦¼): 101 Ã— 11,752 = 118ë§Œ ë²ˆ í•„í„°ë§
for start_idx in range(...):        # 101ê°œ ìœˆë„ìš°
    for stock_code in df['code'].unique():  # 11,752 ì£¼ì‹
        stock_df = df[df['code'] == stock_code].copy()  # ë§¤ë²ˆ í•„í„°ë§!

# âœ… ê°œì„  (ë¹ ë¦„): 11,752 Ã— 101 = ë™ì¼í•˜ì§€ë§Œ ì‚¬ì „ ê·¸ë£¹í•‘
stock_groups = df.groupby('code')    # 1íšŒë§Œ ê·¸ë£¹í•‘
for stock_code, stock_df in tqdm(stock_groups):  # 11,752 ì£¼ì‹
    for start_idx in window_indices:  # 101 ìœˆë„ìš° (í•„í„°ë§ ì—†ìŒ)
```

**ğŸ“ˆ ì§„í–‰ë¥  ëª¨ë‹ˆí„°ë§:**
- âœ… tqdm í”„ë¡œê·¸ë ˆìŠ¤ë°” ë³µêµ¬: `Processing stocks: 10% 1202/11752 [12:17<2:20:14, 1.25it/s]`
- âœ… ì˜ˆìƒ ì™„ë£Œ ì‹œê°„: 2ì‹œê°„ 20ë¶„
- âœ… ì‹¤ì‹œê°„ ì²˜ë¦¬ ìƒíƒœ í™•ì¸ ê°€ëŠ¥

### D. ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ê²€ì¦
**ğŸ’¾ ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´:**
- âœ… ì „ì²´ ì´ë¯¸ì§€ë¥¼ ë©”ëª¨ë¦¬ì— ëˆ„ì  (ìµœëŒ€ ëª‡ GB)
- âœ… ë…„ë„ë³„ ë¶„ë¥˜ ì €ì¥ìœ¼ë¡œ í˜¸í™˜ì„± ìœ ì§€
- âœ… ì¤‘ê°„ ì‹¤íŒ¨ ì‹œì—ë„ ë¶€ë¶„ ê²°ê³¼ í™•ì¸ ê°€ëŠ¥

**ğŸ”„ ì €ì¥ ë°©ì‹:**
```python
# 1. ì „ì²´ ì²˜ë¦¬ ì™„ë£Œ í›„ ë…„ë„ë³„ ë¶„ë¥˜
dates_df = pd.DataFrame({'date': dates, 'image_idx': range(len(dates))})
dates_df['year'] = pd.to_datetime(dates_df['date'], format='%Y%m%d').dt.year

# 2. ë…„ë„ë³„ íŒŒì¼ ì €ì¥ (ê¸°ì¡´ í˜•ì‹ ìœ ì§€)
for year in [1993, 1994, ..., 2000]:
    year_data = dates_df[dates_df['year'] == year]
    save_images_and_labels(year_images, year_labels, year, ...)
```

## ğŸ¯ 10. ë‹¤ìŒ ë‹¨ê³„ ë° ì˜ˆìƒ ê²°ê³¼

### A. í˜„ì¬ ì§„í–‰ ì¤‘ ì‘ì—…
**ğŸ”„ ì§„í–‰ ì¤‘:**
- chart_generator.py --image_days 20 --mode train ì‹¤í–‰ ì¤‘
- 11,752 ì£¼ì‹ ì¤‘ 1,202ê°œ ì™„ë£Œ (10%)
- ì˜ˆìƒ ì™„ë£Œ: 2ì‹œê°„ í›„

### B. ì™„ë£Œ í›„ ê²€ì¦ ê³„íš
**âœ… ë°ì´í„° í’ˆì§ˆ ê²€ì¦:**
1. ìƒì„±ëœ ì´ ì´ë¯¸ì§€ ìˆ˜ í™•ì¸ (ì˜ˆìƒ: ìˆ˜ë§Œ ê°œ)
2. ë…„ë„ë³„ ë¶„í¬ í™•ì¸ (1993-2000ë…„ ê°ê°)
3. ìƒ˜í”Œ ì´ë¯¸ì§€ ì‹œê°ì  ê²€ì¦

**âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸:**
1. 5ì¼, 60ì¼ ìœˆë„ìš°ë„ ë™ì¼ ë°©ì‹ìœ¼ë¡œ ìƒì„±
2. train.pyë¡œ CNN ëª¨ë¸ í›ˆë ¨
3. Sharpe ratio ê°œì„  ì—¬ë¶€ í™•ì¸ (-1.93 â†’ +2.16 ëª©í‘œ)

### C. ì˜ˆìƒ ê°œì„  íš¨ê³¼
**ğŸ“ˆ ì„±ëŠ¥ ê°œì„  ì˜ˆìƒ:**
- âœ… í†µí•© ìº˜ë¦°ë” â†’ í˜„ì‹¤ì  ë°±í…ŒìŠ¤íŒ… í™˜ê²½
- âœ… Non-overlapping â†’ ë°ì´í„° ë…ë¦½ì„± í™•ë³´  
- âœ… ì¼ê´€ëœ ë¦¬ë°¸ëŸ°ì‹± â†’ í¬íŠ¸í´ë¦¬ì˜¤ ì „ëµ ê°œì„ 
- âœ… trend_submit ë°©ì‹ ì ‘ê·¼ â†’ ë…¼ë¬¸ ìˆ˜ì¤€ ì„±ëŠ¥ ê¸°ëŒ€